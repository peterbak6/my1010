(this.webpackJsonpgame1010=this.webpackJsonpgame1010||[]).push([[0],{165:function(t,e,n){},166:function(t,e,n){},175:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),o=n(11),i=n.n(o),c=(n(165),n(50)),s=n(25),l=(n(166),n(213)),f=n(211),u=n(214),h=n(212),d=n(206),g=Object(d.a)((function(t){return{root:{flexGrow:1,height:"100%"},header:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",textAlign:"center",fontFamily:"fantasy",color:"#444",padding:"0.6em",backgroundColor:"#8dd3c7"},points:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",textAlign:"center",fontFamily:"fantasy",color:"#444",backgroundColor:""},h2:{margin:"0 1px",fontSize:"1.7em",color:"#444"},board:{display:"flex",width:"100%",height:"100vh",flexDirection:"column",alignItems:"center",textAlign:"center",padding:"0.2em",backgroundColor:"#f2f2f2"},refresh:{padding:"0 0 0 13px",cursor:"pointer"}}})),p=n(13),y=[{stone:[[0,0]],weight:4,type:0},{stone:[[0,0],[0,1]],weight:3,type:1},{stone:[[0,0],[1,0]],weight:3,type:1},{stone:[[0,0],[0,1],[0,2]],weight:2,type:2},{stone:[[0,0],[1,0],[2,0]],weight:2,type:2},{stone:[[0,0],[1,0],[1,1]],weight:2,type:0},{stone:[[0,0],[1,0],[0,1]],weight:2,type:3},{stone:[[0,0],[0,1],[1,1]],weight:2,type:3},{stone:[[1,0],[1,1],[0,1]],weight:2,type:3},{stone:[[0,0],[0,1],[0,2],[0,3]],weight:1,type:4},{stone:[[0,0],[1,0],[2,0],[3,0]],weight:1,type:4},{stone:[[0,0],[0,1],[1,0],[1,1]],weight:1,type:4},{stone:[[0,0],[0,1],[0,2],[1,2]],weight:1,type:5},{stone:[[1,0],[1,1],[1,2],[0,2]],weight:1,type:5},{stone:[[0,0],[1,0],[0,1],[2,0]],weight:1,type:5},{stone:[[0,0],[1,0],[2,0],[2,1]],weight:1,type:5},{stone:[[1,0],[1,1],[1,2],[0,1]],weight:1,type:6},{stone:[[0,0],[0,1],[0,2],[1,1]],weight:1,type:6},{stone:[[1,0],[0,1],[1,1],[2,1]],weight:1,type:6},{stone:[[0,0],[1,0],[2,0],[1,1]],weight:1,type:6},{stone:[[0,1],[1,0],[1,1],[2,0]],weight:1,type:7},{stone:[[0,0],[1,0],[1,1],[2,1]],weight:1,type:7},{stone:[[0,0],[1,0],[2,0],[0,1],[1,1],[2,1],[0,2],[1,2],[2,2]],weight:1,type:0}],b=function(t,e){var n=e.reduce((function(t,e){return t+e})),r=Math.random()*n;return t.find((function(t,n){return(r-=e[n])<0}))},x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,e=p.c(t).map((function(){return b(p.c(y.length),y.map((function(t){return t.weight})))}));return e.map((function(t){return y[t]}))},j=n(10),m=function(t,e,n){var r=e.size,a=e.padding,o=e.grid*(r+a),i=o,c=p.d().range(e.colors),s=p.c(e.grid).map((function(t){return p.c(e.grid).map((function(e){return{x:e*(r+a),y:t*(r+a),free:!0}}))})),l=x(e.stones),f=[],u={},h=[],d={x:0,y:0},g=0,y=0,b=function(t){t.stone.transition().duration(500).attr("x",r/2).attr("y",r/2).attr("height",0).attr("width",0).remove(),t.stone=null,t.free=!0},j=function(t,n){var o={c:Math.max(0,Math.floor(t/(r+a))),r:Math.max(0,Math.floor(n/(r+a)))};return o.r>=e.grid?(o.y=d.y,o.x=d.x,o.c=o.r=null):(o.y=Math.min(e.grid-1,o.r)*(r+a),o.x=Math.min(e.grid-1,o.c)*(r+a)),o},m=function(t,n){var r=!0;return n.forEach((function(n){(null===t.c||null===t.r||n[0]+t.c>=e.grid||n[0]+t.c<0||n[1]+t.r>=e.grid||n[1]+t.r<0||!1===s[n[1]+t.r][n[0]+t.c].free)&&(r=!1)})),r},v=function(t,e,n){n.forEach((function(n){return n.attr("transform","translate("+t+","+e+")")}))},O=0,w=function(t,e,n){var s=[],l=p.b(t.map((function(t){return t[0]}))),f=p.b(t.map((function(t){return t[1]}))),u=i+1*r,h=O*(r+a);h>o-(l+1)*(r+a)&&(u=i+3*r,h=o-(l+1)*(r+a));var d=S.append("g");return t.forEach((function(t){var n=d.append("rect").attr("class","stn").attr("x",t[0]*(r+a)).attr("y",t[1]*(r+a)).attr("width",r).attr("height",r).attr("rx",1).attr("ry",1).style("fill",c(e)).style("fill-opacity",.75).style("stroke","#000").attr("pointer-events","none").attr("transform","translate("+(h+2)+","+u+")");s.push(n)})),d.append("rect").attr("class","draghandler").attr("stn",n).attr("x",h).attr("y",u).attr("width",(l+1)*(r+a)).attr("height",(f+1)*(r+a)).attr("fill-opacity",0).attr("stroke","none").call(E),O+=l+2,s},C=function(){if(!(h.length>0)){l=x(e.stones),O=0;for(var t=0,n=l.length;t<n;t++){var r=l.shift();u[g]=r.stone;var a=w(r.stone,r.type,g);f.push(a),h.push(g),g++}}};var E=p.a().on("start",(function(t,e,n){y=+p.e(this).attr("stn");var r={x:t.x,y:t.y},a=f[y],o=S.node().getBoundingClientRect().x,i=S.node().getBoundingClientRect().y;a.forEach((function(t){r.x=Math.min(r.x,t.node().getBoundingClientRect().x-o),r.y=Math.min(r.y,t.node().getBoundingClientRect().y-i)})),d=r,h.indexOf(y)<0&&(y=null)})).on("drag",(function(t){if(null!==y){var e=f[y],n=u[y],r=j(t.x,t.y);v(r.x,r.y,e);var a=m(r,n);e.forEach((function(t){t.style("fill-opacity",!1===a?.25:.75)}))}})).on("end",(function(t){if(null!==y){var r=f[y],a=u[y],c=j(t.x,t.y);if(!0===m(c,a)){!function(t,e,n,r){n.forEach((function(n,a){s[n[1]+t.r][n[0]+t.c].free=e,s[n[1]+t.r][n[0]+t.c].stone=r[a]}))}(c,!1,a,r),p.e(this).remove(),n("points",a.length),h.splice(h.indexOf(y),1);var l=function(){for(var t=[],n=[],r=function(e){var r=s[e].every((function(t){return!t.free})),a=s.map((function(t){return t[e]})).every((function(t){return!t.free}));r&&t.push(e),a&&n.push(e)},a=0;a<e.grid;a++)r(a);return t.forEach((function(t){s[t].forEach((function(t){b(t)}))})),n.forEach((function(t){s.forEach((function(e){var n=e[t];b(n)}))})),(t.length+n.length)*e.grid}();setTimeout((function(){n("fullrow",l)}),500),C()}else c=j(o,i),v(c.x,c.y,r),r.forEach((function(t){t.style("fill-opacity",.75)}))}}));p.e(t).selectAll("*").remove();var S=p.e(t).append("svg").attr("width",o+2*a).attr("height",2*(i+a)).append("g").attr("transform","translate("+a+","+a+")");S.selectAll(".row").data(s).enter().append("g").attr("class","row").selectAll(".square").data((function(t){return t})).enter().append("rect").attr("class","board").attr("x",(function(t){return t.x})).attr("y",(function(t){return t.y})).attr("width",r).attr("height",r).attr("rx",r/e.size).attr("ry",r/e.size).style("fill","#fff").style("stroke","#a2a2a2"),C()},v=function(t){var e=t.config,n=t.points,a=t.handleChange,o=g(),i=Object(r.useRef)(null),c=function(t,e){a(t,e)};return Object(r.useLayoutEffect)((function(){n>0||m(i.current,e,c)})),Object(j.jsx)(l.a,{className:o.board,ref:i})},O=function(){return Object(j.jsxs)("svg",{height:"24",viewBox:"0 0 24 24",width:"24",children:[Object(j.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(j.jsx)("path",{d:"M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"})]})};var w=function(){var t=g(),e=Object(r.useState)(""),n=Object(s.a)(e,2),a=n[0],o=n[1],i=Object(r.useState)(Object.keys(JSON.parse(localStorage.getItem("my1010")||"{}"))),d=Object(s.a)(i,2),p=d[0],y=d[1],b=Object(r.useState)(0),x=Object(s.a)(b,2),m=x[0],w=x[1],C=Object(r.useState)(0),E=Object(s.a)(C,2),S=E[0],M=E[1];Object(r.useEffect)((function(){if(a){var t=JSON.parse(localStorage.getItem("my1010")||"{}");void 0===t[a]&&(t[a]=0),t[a]=Math.max(S,m),M(t[a]),localStorage.setItem("my1010",JSON.stringify(t))}}),[m]),Object(r.useEffect)((function(){if(a){var t=JSON.parse(localStorage.getItem("my1010")||"{}");void 0===t[a]&&(t[a]=0),w(0),M(t[a]),y(Object.keys(t))}}),[a]);var k=Object(r.useCallback)((function(t,e){"points"!==t&&"fullrow"!==t||w((function(t){return+t+e}))}),[]);return Object(j.jsxs)(l.a,{className:t.root,children:[Object(j.jsxs)("header",{className:t.header,children:[Object(j.jsx)("h2",{className:t.h2,children:"My 1010"}),Object(j.jsx)(u.a,{value:a,onChange:function(t,e){e&&e.inputValue?o(e.inputValue):o(e)},selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,options:p,getOptionLabel:function(t){return t.inputValue?t.inputValue:t},renderOption:function(t){return t},style:{width:120},freeSolo:!0,renderInput:function(t){return Object(j.jsx)(h.a,Object(c.a)(Object(c.a)({},t),{},{placeholder:"user"}))}})]}),Object(j.jsxs)(l.a,{className:t.points,children:[Object(j.jsx)("h3",{className:t.h3,children:m}),Object(j.jsx)(l.a,{className:t.refresh,children:Object(j.jsx)(f.a,{onClick:function(){w(0)},children:Object(j.jsx)(O,{})})}),Object(j.jsxs)("h3",{className:t.h3,children:["(",S,")"]})]}),Object(j.jsx)(v,{config:{size:37,grid:10,padding:2,stones:3,colors:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],colors1:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"]},points:m,handleChange:k})]})},C=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,217)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,o=e.getLCP,i=e.getTTFB;n(t),r(t),a(t),o(t),i(t)}))};i.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(w,{})}),document.getElementById("root")),C()}},[[175,1,2]]]);
//# sourceMappingURL=main.dd50fb73.chunk.js.map