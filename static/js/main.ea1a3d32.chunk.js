(this.webpackJsonpgame1010=this.webpackJsonpgame1010||[]).push([[0],{165:function(t,e,n){},166:function(t,e,n){},175:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),o=n(11),i=n.n(o),c=(n(165),n(50)),s=n(25),l=(n(166),n(213)),u=n(211),f=n(214),h=n(212),d=n(206),g=Object(d.a)((function(t){return{root:{flexGrow:1,height:"100%",overflow:"hidden"},header:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",textAlign:"center",fontFamily:"fantasy",color:"#444",padding:"0.6em",backgroundColor:"#8dd3c7"},points:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",textAlign:"center",fontFamily:"fantasy",color:"#444",backgroundColor:""},h2:{margin:"0 1px",fontSize:"1.7em",color:"#444"},board:{display:"flex",width:"100%",height:"100vh",flexDirection:"column",alignItems:"center",textAlign:"center",padding:"0.2em",backgroundColor:"#f2f2f2"},refresh:{padding:"0 0 0 13px",cursor:"pointer"}}})),p=n(13),y=[{stone:[[0,0]],weight:4,type:0},{stone:[[0,0],[0,1]],weight:3,type:1},{stone:[[0,0],[1,0]],weight:3,type:1},{stone:[[0,0],[0,1],[0,2]],weight:2,type:2},{stone:[[0,0],[1,0],[2,0]],weight:2,type:2},{stone:[[0,0],[1,0],[1,1]],weight:2,type:0},{stone:[[0,0],[1,0],[0,1]],weight:2,type:3},{stone:[[0,0],[0,1],[1,1]],weight:2,type:3},{stone:[[1,0],[1,1],[0,1]],weight:2,type:3},{stone:[[0,0],[0,1],[0,2],[0,3]],weight:1,type:4},{stone:[[0,0],[1,0],[2,0],[3,0]],weight:1,type:4},{stone:[[0,0],[0,1],[1,0],[1,1]],weight:1,type:4},{stone:[[0,0],[0,1],[0,2],[1,2]],weight:1,type:5},{stone:[[1,0],[1,1],[1,2],[0,2]],weight:1,type:5},{stone:[[0,0],[1,0],[0,1],[2,0]],weight:1,type:5},{stone:[[0,0],[1,0],[2,0],[2,1]],weight:1,type:5},{stone:[[1,0],[1,1],[1,2],[0,1]],weight:1,type:6},{stone:[[0,0],[0,1],[0,2],[1,1]],weight:1,type:6},{stone:[[1,0],[0,1],[1,1],[2,1]],weight:1,type:6},{stone:[[0,0],[1,0],[2,0],[1,1]],weight:1,type:6},{stone:[[0,1],[1,0],[1,1],[2,0]],weight:1,type:7},{stone:[[0,0],[1,0],[1,1],[2,1]],weight:1,type:7},{stone:[[0,0],[1,0],[2,0],[0,1],[1,1],[2,1],[0,2],[1,2],[2,2]],weight:1,type:0}],x=function(t,e){var n=e.reduce((function(t,e){return t+e})),r=Math.random()*n;return t.find((function(t,n){return(r-=e[n])<0}))},j=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,e=p.c(t).map((function(){return x(p.c(y.length),y.map((function(t){return t.weight})))}));return e.map((function(t){return y[t]}))},m=n(10),b=function(t,e,n){var r=e.size,a=e.padding,o=e.grid*(r+a),i=(e.grid+5)*(r+a),c=p.d().range(e.colors),s=p.c(e.grid).map((function(t){return p.c(e.grid).map((function(e){return{x:e*(r+a),y:t*(r+a),free:!0}}))})),l=j(e.stones),u=[],f={},h=[],d={x:0,y:0},g=0,y=0,x=function(t){t.stone.transition().duration(500).attr("x",r/2).attr("y",r/2).attr("height",0).attr("width",0).remove(),t.stone=null,t.free=!0},m=function(t,n){var o={c:Math.max(0,Math.floor(t/(r+a))),r:Math.max(0,Math.floor(n/(r+a)))};return o.r>=e.grid?(o.y=d.y,o.x=d.x,o.c=o.r=null):(o.y=Math.min(e.grid-1,o.r)*(r+a),o.x=Math.min(e.grid-1,o.c)*(r+a)),o},b=function(t,n){var r=!0;return n.forEach((function(n){(null===t.c||null===t.r||n[0]+t.c>=e.grid||n[0]+t.c<0||n[1]+t.r>=e.grid||n[1]+t.r<0||!1===s[n[1]+t.r][n[0]+t.c].free)&&(r=!1)})),r},v=function(t,e,n){n.forEach((function(n){return n.attr("transform","translate("+t+","+e+")")}))},O=0,w=function(t,e,n){var s=[],l=p.b(t.map((function(t){return t[0]}))),u=p.b(t.map((function(t){return t[1]}))),f=i-4*(r+a),h=O*(r+a);h>o-(l+1)*(r+a)&&(h=o-(l+1)*(r+a));var d=S.append("g");return t.forEach((function(t){var n=d.append("rect").attr("class","stn").attr("x",t[0]*(r+a)).attr("y",t[1]*(r+a)).attr("width",r).attr("height",r).attr("rx",1).attr("ry",1).style("fill",c(e)).style("fill-opacity",.75).style("stroke","#000").style("stroke-width",1).attr("pointer-events","none").attr("transform","translate("+(h+2)+","+f+")");s.push(n)})),d.append("rect").attr("class","draghandler").attr("stn",n).attr("x",h).attr("y",f).attr("width",(l+1)*(r+a)).attr("height",(u+1)*(r+a)).attr("fill-opacity",0).attr("stroke","none").call(E),O+=l+2,s},C=function(){if(!(h.length>0)){l=j(e.stones),O=0;for(var t=0,n=l.length;t<n;t++){var r=l.shift();f[g]=r.stone;var a=w(r.stone,r.type,g);u.push(a),h.push(g),g++}}};var E=p.a().on("start",(function(t,e,n){y=+p.e(this).attr("stn");var r={x:t.x,y:t.y},a=u[y],o=S.node().getBoundingClientRect().x,i=S.node().getBoundingClientRect().y;a.forEach((function(t){r.x=Math.min(r.x,t.node().getBoundingClientRect().x-o),r.y=Math.min(r.y,t.node().getBoundingClientRect().y-i)})),d=r,h.indexOf(y)<0&&(y=null)})).on("drag",(function(t){if(null!==y){var e=u[y],n=f[y],a=m(t.x,t.y-2*r);v(a.x,a.y,e);var o=b(a,n);e.forEach((function(t){t.style("fill-opacity",!1===o?.25:.75)}))}})).on("end",(function(t){if(null!==y){var a=u[y],c=f[y],l=m(t.x,t.y-2*r);if(!0===b(l,c)){!function(t,e,n,r){n.forEach((function(n,a){s[n[1]+t.r][n[0]+t.c].free=e,s[n[1]+t.r][n[0]+t.c].stone=r[a]}))}(l,!1,c,a),p.e(this).remove(),a.forEach((function(t){return t.style("stroke-width",0)})),n("points",c.length),h.splice(h.indexOf(y),1);var d=function(){for(var t=[],n=[],r=function(e){var r=s[e].every((function(t){return!t.free})),a=s.map((function(t){return t[e]})).every((function(t){return!t.free}));r&&t.push(e),a&&n.push(e)},a=0;a<e.grid;a++)r(a);return t.forEach((function(t){s[t].forEach((function(t){x(t)}))})),n.forEach((function(t){s.forEach((function(e){var n=e[t];x(n)}))})),(t.length+n.length)*e.grid}();setTimeout((function(){n("fullrow",d)}),500),C()}else l=m(o,i),v(l.x,l.y,a),a.forEach((function(t){t.style("fill-opacity",.75)}))}}));p.e(t).selectAll("*").remove();var S=p.e(t).append("svg").attr("width",o).attr("height",i).append("g").attr("transform","translate("+a+","+a+")");S.selectAll(".row").data(s).enter().append("g").attr("class","row").selectAll(".square").data((function(t){return t})).enter().append("rect").attr("class","board").attr("x",(function(t){return t.x})).attr("y",(function(t){return t.y})).attr("width",r).attr("height",r).attr("rx",r/e.size).attr("ry",r/e.size).style("fill","#fff").style("stroke","#a2a2a2"),C()},v=function(t){var e=t.config,n=t.points,a=t.handleChange,o=g(),i=Object(r.useRef)(null),c=function(t,e){a(t,e)};return Object(r.useLayoutEffect)((function(){n>0||b(i.current,e,c)})),Object(m.jsx)(l.a,{className:o.board,ref:i})},O=function(){return Object(m.jsxs)("svg",{height:"24",viewBox:"0 0 24 24",width:"24",children:[Object(m.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(m.jsx)("path",{d:"M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"})]})};var w=function(){var t=g(),e=Object(r.useState)(""),n=Object(s.a)(e,2),a=n[0],o=n[1],i=Object(r.useState)(Object.keys(JSON.parse(localStorage.getItem("my1010")||"{}"))),d=Object(s.a)(i,2),p=d[0],y=d[1],x=Object(r.useState)(0),j=Object(s.a)(x,2),b=j[0],w=j[1],C=Object(r.useState)(0),E=Object(s.a)(C,2),S=E[0],k=E[1];Object(r.useEffect)((function(){if(a){var t=JSON.parse(localStorage.getItem("my1010")||"{}");void 0===t[a]&&(t[a]=0),t[a]=Math.max(S,b),k(t[a]),localStorage.setItem("my1010",JSON.stringify(t))}}),[b]),Object(r.useEffect)((function(){if(a){var t=JSON.parse(localStorage.getItem("my1010")||"{}");void 0===t[a]&&(t[a]=0),w(0),k(t[a]),y(Object.keys(t))}}),[a]);var M=Object(r.useCallback)((function(t,e){"points"!==t&&"fullrow"!==t||w((function(t){return+t+e}))}),[]);return Object(m.jsxs)(l.a,{className:t.root,children:[Object(m.jsxs)("header",{className:t.header,children:[Object(m.jsx)("h2",{className:t.h2,children:"My 1010"}),Object(m.jsx)(f.a,{value:a,onChange:function(t,e){e&&e.inputValue?o(e.inputValue):o(e)},selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,options:p,getOptionLabel:function(t){return t.inputValue?t.inputValue:t},renderOption:function(t){return t},style:{width:120},freeSolo:!0,renderInput:function(t){return Object(m.jsx)(h.a,Object(c.a)(Object(c.a)({},t),{},{placeholder:"user"}))}})]}),Object(m.jsxs)(l.a,{className:t.points,children:[Object(m.jsx)("h3",{className:t.h3,children:b}),Object(m.jsx)(l.a,{className:t.refresh,children:Object(m.jsx)(u.a,{onClick:function(){w(0)},children:Object(m.jsx)(O,{})})}),Object(m.jsxs)("h3",{className:t.h3,children:["(",S,")"]})]}),Object(m.jsx)(v,{config:{size:37,grid:10,padding:2,stones:3,colors:["#4baf90","#a664c4","#73b34a","#c95682","#787c37","#6587cd","#ce9b44","#c95b41"]},points:b,handleChange:M})]})},C=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,217)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,o=e.getLCP,i=e.getTTFB;n(t),r(t),a(t),o(t),i(t)}))};i.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(w,{})}),document.getElementById("root")),C()}},[[175,1,2]]]);
//# sourceMappingURL=main.ea1a3d32.chunk.js.map