(this.webpackJsonpgame1010=this.webpackJsonpgame1010||[]).push([[0],{165:function(t,e,n){},166:function(t,e,n){},175:function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),a=n(11),i=n.n(a),c=(n(165),n(50)),s=n(25),l=(n(166),n(213)),u=n(211),f=n(214),h=n(212),d=n(206),g=Object(d.a)((function(t){return{root:{flexGrow:1,height:"100%",overflow:"hidden"},header:{display:"flex",overflow:"hidden",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",textAlign:"center",fontFamily:"fantasy",color:"#444",padding:"0.6em",backgroundColor:"#8dd3c7"},points:{display:"flex",overflow:"hidden",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",textAlign:"center",fontFamily:"fantasy",color:"#444",backgroundColor:"white"},h2:{margin:"0 1px",fontSize:"1.1em",color:"#444"},h3:{margin:"0 1px",fontSize:"1.0em",color:"#444"},board:{display:"flex",overflow:"hidden",width:"100%",height:"auto",flexDirection:"column",alignItems:"center",textAlign:"center",padding:"0.2em",backgroundColor:"#ffffff"},refresh:{padding:"0 0 0 13px",cursor:"pointer"}}})),p=n(13),y=[{stone:[[0,0]],weight:4,type:0},{stone:[[0,0],[0,1]],weight:3,type:1},{stone:[[0,0],[1,0]],weight:3,type:1},{stone:[[0,0],[0,1],[0,2]],weight:2,type:2},{stone:[[0,0],[1,0],[2,0]],weight:2,type:2},{stone:[[0,0],[1,0],[1,1]],weight:2,type:0},{stone:[[0,0],[1,0],[0,1]],weight:2,type:3},{stone:[[0,0],[0,1],[1,1]],weight:2,type:3},{stone:[[1,0],[1,1],[0,1]],weight:2,type:3},{stone:[[0,0],[0,1],[0,2],[0,3]],weight:1,type:4},{stone:[[0,0],[1,0],[2,0],[3,0]],weight:1,type:4},{stone:[[0,0],[0,1],[1,0],[1,1]],weight:1,type:4},{stone:[[0,0],[0,1],[0,2],[1,2]],weight:1,type:5},{stone:[[1,0],[1,1],[1,2],[0,2]],weight:1,type:5},{stone:[[0,0],[1,0],[0,1],[2,0]],weight:1,type:5},{stone:[[0,0],[1,0],[2,0],[2,1]],weight:1,type:5},{stone:[[1,0],[1,1],[1,2],[0,1]],weight:1,type:6},{stone:[[0,0],[0,1],[0,2],[1,1]],weight:1,type:6},{stone:[[1,0],[0,1],[1,1],[2,1]],weight:1,type:6},{stone:[[0,0],[1,0],[2,0],[1,1]],weight:1,type:6},{stone:[[0,1],[1,0],[1,1],[2,0]],weight:1,type:7},{stone:[[0,0],[1,0],[1,1],[2,1]],weight:1,type:7},{stone:[[0,0],[1,0],[2,0],[0,1],[1,1],[2,1],[0,2],[1,2],[2,2]],weight:1,type:0}],x=function(t,e){var n=e.reduce((function(t,e){return t+e})),r=Math.random()*n;return t.find((function(t,n){return(r-=e[n])<0}))},m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,e=p.c(t).map((function(){return x(p.c(y.length),y.map((function(t){return t.weight})))}));return e.map((function(t){return y[t]}))},j=n(10),b=function(t,e,n){var r=e.padding,o=Math.floor(t.getBoundingClientRect().width/e.grid-2*r)||e.size,a=e.grid*(o+r),i=(e.grid+5)*(o+r),c=p.d().range(e.colors),s=p.c(e.grid).map((function(t){return p.c(e.grid).map((function(e){return{x:e*(o+r),y:t*(o+r),free:!0}}))})),l=m(e.stones),u=[],f={},h=[],d={x:0,y:0},g=0,y=0,x=function(t){t.stone.transition().duration(500).attr("x",o/2).attr("y",o/2).attr("height",0).attr("width",0).remove(),t.stone=null,t.free=!0},j=function(t,n){var a={c:Math.max(0,Math.floor(t/(o+r))),r:Math.max(0,Math.floor(n/(o+r)))};return a.r>=e.grid?(a.y=d.y,a.x=d.x,a.c=a.r=null):(a.y=Math.min(e.grid-1,a.r)*(o+r),a.x=Math.min(e.grid-1,a.c)*(o+r)),a},b=function(t,n){var r=!0;return n.forEach((function(n){(null===t.c||null===t.r||n[0]+t.c>=e.grid||n[0]+t.c<0||n[1]+t.r>=e.grid||n[1]+t.r<0||!1===s[n[1]+t.r][n[0]+t.c].free)&&(r=!1)})),r},v=function(t,e,n){n.forEach((function(n){return n.attr("transform","translate("+t+","+e+")")}))},w=0,O=function(t,e,n){var s=[],l=p.b(t.map((function(t){return t[0]}))),u=p.b(t.map((function(t){return t[1]}))),f=i-4*(o+r),h=w*(o+r);h>a-(l+1)*(o+r)&&(h=a-(l+1)*(o+r));var d=S.append("g");return t.forEach((function(t){var n=d.append("rect").attr("class","stn").attr("x",t[0]*(o+r)).attr("y",t[1]*(o+r)).attr("width",o).attr("height",o).attr("rx",1).attr("ry",1).style("fill",c(e)).style("fill-opacity",.75).style("stroke","#000").style("stroke-width",1).attr("pointer-events","none").attr("transform","translate("+(h+2)+","+f+")");s.push(n)})),d.append("rect").attr("class","draghandler").attr("stn",n).attr("x",h).attr("y",f).attr("width",(l+1)*(o+r)).attr("height",(u+1)*(o+r)).attr("fill-opacity",0).attr("stroke","none").call(E),w+=l+2,s},C=function(){if(!(h.length>0)){l=m(e.stones),w=0;for(var t=0,n=l.length;t<n;t++){var r=l.shift();f[g]=r.stone;var o=O(r.stone,r.type,g);u.push(o),h.push(g),g++}}};var E=p.a().on("start",(function(t,e,n){y=+p.e(this).attr("stn");var r={x:t.x,y:t.y},o=u[y],a=S.node().getBoundingClientRect().x,i=S.node().getBoundingClientRect().y;o.forEach((function(t){r.x=Math.min(r.x,t.node().getBoundingClientRect().x-a),r.y=Math.min(r.y,t.node().getBoundingClientRect().y-i)})),d=r,h.indexOf(y)<0&&(y=null)})).on("drag",(function(t){if(null!==y){var e=u[y],n=f[y],r=j(t.x,t.y-2*o);v(r.x,r.y,e);var a=b(r,n);e.forEach((function(t){t.style("fill-opacity",!1===a?.25:.75)}))}})).on("end",(function(t){if(null!==y){var r=u[y],c=f[y],l=j(t.x,t.y-2*o);if(!0===b(l,c)){!function(t,e,n,r){n.forEach((function(n,o){s[n[1]+t.r][n[0]+t.c].free=e,s[n[1]+t.r][n[0]+t.c].stone=r[o]}))}(l,!1,c,r),p.e(this).remove(),r.forEach((function(t){return t.style("stroke-width",0)})),n("points",c.length),h.splice(h.indexOf(y),1);var d=function(){for(var t=[],n=[],r=function(e){var r=s[e].every((function(t){return!t.free})),o=s.map((function(t){return t[e]})).every((function(t){return!t.free}));r&&t.push(e),o&&n.push(e)},o=0;o<e.grid;o++)r(o);return t.forEach((function(t){s[t].forEach((function(t){x(t)}))})),n.forEach((function(t){s.forEach((function(e){var n=e[t];x(n)}))})),(t.length+n.length)*e.grid}();setTimeout((function(){n("fullrow",d)}),500),C()}else l=j(a,i),v(l.x,l.y,r),r.forEach((function(t){t.style("fill-opacity",.75)}))}}));p.e(t).selectAll("*").remove();var S=p.e(t).append("svg").attr("width",a).attr("height",i).append("g").attr("transform","translate("+r+","+r+")");S.selectAll(".row").data(s).enter().append("g").attr("class","row").selectAll(".square").data((function(t){return t})).enter().append("rect").attr("class","board").attr("x",(function(t){return t.x})).attr("y",(function(t){return t.y})).attr("width",o).attr("height",o).attr("rx",o/e.size).attr("ry",o/e.size).style("fill","#fff").style("stroke","#a2a2a2"),C()},v=function(t){var e=t.config,n=t.points,o=t.handleChange,a=g(),i=Object(r.useRef)(null),c=function(t,e){o(t,e)};return Object(r.useLayoutEffect)((function(){n>0||b(i.current,e,c)})),Object(j.jsx)(l.a,{className:a.board,ref:i})},w=function(){return Object(j.jsxs)("svg",{height:"24",viewBox:"0 0 24 24",width:"24",children:[Object(j.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(j.jsx)("path",{d:"M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"})]})};var O=function(){var t=g(),e=Object(r.useState)(""),n=Object(s.a)(e,2),o=n[0],a=n[1],i=Object(r.useState)(Object.keys(JSON.parse(localStorage.getItem("my1010")||"{}"))),d=Object(s.a)(i,2),p=d[0],y=d[1],x=Object(r.useState)(0),m=Object(s.a)(x,2),b=m[0],O=m[1],C=Object(r.useState)(0),E=Object(s.a)(C,2),S=E[0],M=E[1];Object(r.useEffect)((function(){if(o){var t=JSON.parse(localStorage.getItem("my1010")||"{}");void 0===t[o]&&(t[o]=0),t[o]=Math.max(S,b),M(t[o]),localStorage.setItem("my1010",JSON.stringify(t))}}),[b]),Object(r.useEffect)((function(){if(o){var t=JSON.parse(localStorage.getItem("my1010")||"{}");void 0===t[o]&&(t[o]=0),O(0),M(t[o]),y(Object.keys(t))}}),[o]);var k=Object(r.useCallback)((function(t,e){"points"!==t&&"fullrow"!==t||O((function(t){return+t+e}))}),[]);return Object(j.jsxs)(l.a,{className:t.root,children:[Object(j.jsxs)("header",{className:t.header,children:[Object(j.jsx)("h2",{className:t.h2,children:"My 1010"}),Object(j.jsx)(f.a,{value:o,onChange:function(t,e){e&&e.inputValue?a(e.inputValue):a(e)},selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,options:p,getOptionLabel:function(t){return t.inputValue?t.inputValue:t},renderOption:function(t){return t},style:{width:120},freeSolo:!0,renderInput:function(t){return Object(j.jsx)(h.a,Object(c.a)(Object(c.a)({},t),{},{placeholder:"user"}))}})]}),Object(j.jsxs)(l.a,{className:t.points,children:[Object(j.jsx)("h3",{className:t.h3,children:b}),Object(j.jsx)(l.a,{className:t.refresh,children:Object(j.jsx)(u.a,{onClick:function(){O(0)},children:Object(j.jsx)(w,{})})}),Object(j.jsxs)("h3",{className:t.h3,children:["(",S,")"]})]}),Object(j.jsx)(v,{config:{size:37,grid:10,padding:2,stones:3,colors:["#4baf90","#a664c4","#73b34a","#c95682","#787c37","#6587cd","#ce9b44","#c95b41"]},points:b,handleChange:k})]})},C=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,217)).then((function(e){var n=e.getCLS,r=e.getFID,o=e.getFCP,a=e.getLCP,i=e.getTTFB;n(t),r(t),o(t),a(t),i(t)}))};i.a.render(Object(j.jsx)(o.a.StrictMode,{children:Object(j.jsx)(O,{})}),document.getElementById("root")),C()}},[[175,1,2]]]);
//# sourceMappingURL=main.fca9c9f4.chunk.js.map